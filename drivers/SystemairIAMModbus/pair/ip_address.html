<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="../../../assets/material.min.css">
  <link rel="stylesheet" href="../../../assets/styles.css">
</head>
<body>

<div class="mdl-grid header">
</div>
<div class="mdl-grid">
  <div class="mdl-cell mdl-cell--4-col mdl-cell--4-col-phone mdl-typography--text-center">
    <span data-i18n="pair.ipaddress_label">Enter the IP address for the Systemair IAM</span>
  </div>
</div>
<div class="mdl-grid">
  <div class="mdl-cell mdl-cell--4-col mdl-cell--4-col-phone mdl-typography--text-center">
    <div class="mdl-textfield mdl-js-textfield">
      <input class="mdl-textfield__input input_ip_address" type="text" id="ipaddress" name="ipAddress" maxlength="15"
             pattern="((^|\.)((25[0-5])|(2[0-4]\d)|(1\d\d)|([1-9]?\d))){4}$">
      <label class="mdl-textfield__label" for="ipaddress"></label>
      <span class="mdl-textfield__error" data-i18n="pair.valid_ip_address"></span>
    </div>
  </div>
</div>

<div class="mdl-grid">
  <div class="mdl-cell mdl-cell--4-col mdl-cell--4-col-phone grid_center">
    <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect exec_button" id="submit"
            data-i18n="pair.submit" style="color: white; background-color: #00c341;">
      Submit
    </button>
  </div>
</div>

<script type="text/javascript">
  Homey.setTitle(Homey.__('pair.title'));

  document.getElementById('submit').onclick = (e) => {
    e.preventDefault();
    Homey.showLoadingOverlay();
    const ipaddress = document.getElementById("ipaddress").value;

    Homey.emit('ip_address_entered', { ipaddress }, (err, result) => {
      Homey.hideLoadingOverlay();
      if (err) {
        Homey.alert(err, 'error', () => {
        });
      }
    });
  };
</script>
<script src="../../../assets/material.min.js"></script>
</body>
</html>
